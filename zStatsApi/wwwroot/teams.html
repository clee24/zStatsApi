<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Teams</title>
    <style>
        table {
            border-collapse: collapse;
            width: 60%;
        }
        th, td {
            border: 1px solid #333;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
<h1>Teams</h1>

<table id="teamsTable">
    <thead>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Rank</th>
    </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
    const apiBase = "/teams";

    async function loadTeams() {
        try {
            /**
             * @type {{id: number, name: string, rankLabel: string}[]}
             */
            const teams = await (await fetch(apiBase)).json();

            console.log("Teams from API:", teams);

            const tbody = document.querySelector("#teamsTable tbody");
            tbody.innerHTML = "";

            teams.forEach(team => {
                const row = document.createElement("tr");

                const rank = team.rankLabel ?? "â€”";

                row.innerHTML = `
                    <td>${team.id}</td>
                    <td>${team.name}</td>
                    <td>${rank}</td>
                `;
                tbody.appendChild(row);
            });
        } catch (err) {
            console.error("Failed to load teams:", err);
            alert("Could not load teams, please try again later.");
        }
    }

    loadTeams();
</script>
</body>
</html>
